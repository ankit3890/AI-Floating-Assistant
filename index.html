<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Floating Assistant</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="planning-board.css">
  <link rel="stylesheet" href="file-convert.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar expanded" id="sidebar">
      <div class="sidebar-header">
        <button id="menu-btn" class="control-btn" title="Expand Menu">
          <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </button>

      </div>
      
      <ul class="ai-list" id="ai-list">
        <!-- Dynamic Items will be injected here -->
        
        <!-- Action Mode Removed -->
        
        <!-- Normal Browser Mode (Always at bottom or separate, here we keep it as standard for now, could be dynamic too but hardcoded is safer for core feature) -->
        <li class="ai-item browser-mode" data-url="https://www.google.com" title="Web Browser">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>
           <span class="ai-name">Browser</span>
        </li>


      </ul>

      <div class="sidebar-footer">
        
        <!-- Settings Row -->
        <div class="footer-row">
            <button id="btn-settings-app" class="control-btn" title="Manage AIs">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
    
            <button id="btn-about-app" class="control-btn" title="About">
               <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            </button>
    
            <button id="toggle-top" class="control-btn" title="Toggle Always On Top">
               <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                 <line x1="12" y1="17" x2="12" y2="22"></line>
                 <path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"></path>
               </svg>
            </button>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="content-area">
      <!-- Browser Toolbar (Hidden by default) -->
      <div id="browser-toolbar" class="browser-toolbar hidden">
        <button class="nav-btn" id="nav-back">
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </button>
        <button class="nav-btn" id="nav-forward">
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </button>
        <button class="nav-btn" id="nav-reload">
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
        </button>
        
        <input type="text" id="address-bar" placeholder="Enter URL or search..." />
      </div>

      <div id="webview-container" class="split-container">
          <!-- Pane 1 (Default) - No overlay needed -->
          <div id="pane-1" class="split-pane active-pane">
              <webview
                id="ai-view"
                src="https://chatgpt.com"
                partition="persist:ai_session"
                allowpopups
                useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:124.0) Gecko/20100101 Firefox/124.0"
              ></webview>
          </div>
          

      </div> <!-- End Webview Container -->

      <!-- Compare Mode Pane -->
      <div id="pane-compare" class="compare-pane hidden">
          <div class="compare-header">
              <span class="compare-title">Compare Mode</span>
              <div class="sync-toggle-wrapper">
                  <label for="sync-scroll-toggle">Sync Scroll</label>
                  <input type="checkbox" id="sync-scroll-toggle" checked>
              </div>
          </div>
          
          <div class="compare-grid" id="compare-grid">
              <!-- Dynamically Populated -->
          </div>

          <div class="compare-controls">
              <div class="ai-toggles" id="ai-toggles">
                  <!-- Dynamically Populated -->
              </div>
              <div class="compare-input-row">
                  <input type="text" id="compare-input" placeholder="Ask all AIs..." />
                  <button id="compare-send-btn">
                      <svg viewBox="0 0 24 24" fill="none" class="icon send-icon" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                  </button>
              </div>
          </div>
      </div>

      <!-- Planning Board Pane -->
      <div id="pane-planning-board" class="planning-board-pane hidden">
          <div class="planning-board-header">
              <span class="board-title" id="active-board-name">Untitled Board</span>
              <div class="board-tools">
                  <button class="tool-btn active" data-tool="select" title="Select">
                      <svg viewBox="0 0 24 24"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path></svg>
                  </button>
                  <button class="tool-btn" data-tool="text" title="Add Text">
                      <svg viewBox="0 0 24 24"><line x1="4" y1="7" x2="20" y2="7"></line><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>
                  </button>
                  <button class="tool-btn" data-tool="image" title="Add Image">
                      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                  </button>
                  <button class="tool-btn" data-tool="draw" title="Draw">
                      <svg viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>
                  </button>
                  <button class="tool-btn" data-tool="eraser" title="Eraser">
                      <svg viewBox="0 0 24 24"><path d="M20 20H7L3 16l5-5 8 8 4-4z"></path><path d="M16 16l4-4"></path></svg>
                  </button>
                  <button class="tool-btn" id="board-capture-btn" title="Capture Screen to Board (Ctrl+Alt+S)">
                      <svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                  </button>
                  <button class="tool-btn" id="board-screen-draw" title="Draw on Screen (Full Screen Overlay)">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line><path d="M15.5 8.5l-3.5 3.5l-3.5 -3.5"></path></svg>
                  </button>
                  <div class="tool-divider"></div>
                  <button class="tool-btn" id="board-undo-btn" title="Undo (Ctrl+Z)">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg>
                  </button>
                  <button class="tool-btn" id="board-redo-btn" title="Redo (Ctrl+Y)">
                       <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"></path><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"></path></svg>
                  </button>
                  <div class="tool-divider"></div>
                  <button class="tool-btn" id="board-zoom-in" title="Zoom In">+</button>
                  <button class="tool-btn" id="board-zoom-out" title="Zoom Out">‚àí</button>
                  <button class="tool-btn" id="board-reset-view" title="Reset View">‚äô</button>
                  <div class="tool-divider"></div>
                  <button class="tool-btn" id="board-new" title="New Board (Ctrl+N)">
                      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                  </button>
                  <button class="tool-btn" id="board-open" title="Open Board (Ctrl+O)">
                      <svg viewBox="0 0 24 24"><path d="M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2H9l-2-2H5a2 2 0 0 0-2 2v7"></path><polyline points="3 15 12 6 21 15"></polyline></svg>
                  </button>
                  <button class="tool-btn" id="board-save" title="Save Board (Ctrl+S)">
                      <svg viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                  </button>
                  <button class="tool-btn" id="board-save-as" title="Save Board As...">
                      <svg viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline><circle cx="17" cy="17" r="3"></circle><line x1="17" y1="15" x2="17" y2="19"></line><line x1="15" y1="17" x2="19" y2="17"></line></svg>
                  </button>
                  <div class="tool-divider"></div>
                  <input type="color" id="board-color-picker" class="color-picker" value="#3b82f6" title="Stroke Color">
                  <select id="board-stroke-size" class="stroke-size-select" title="Stroke Size">
                      <option value="1">Thin</option>
                      <option value="3" selected>Normal</option>
                      <option value="5">Thick</option>
                      <option value="8">Very Thick</option>
                  </select>
                  <div class="tool-divider"></div>
                  <button class="tool-btn" id="board-delete-btn" title="Delete Selected (Del)" style="display:none; background:#ef4444;">
                      <svg viewBox="0 0 24 24"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                  </button>
                  <button class="tool-btn" id="board-help-btn" title="Keyboard Shortcuts">
                      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                  </button>
              </div>
          </div>
          
          <div class="planning-board-viewport">
              <!-- Drawing Layer is now fixed to the viewport -->
              <canvas id="drawing-layer"></canvas>
              
              <!-- Only elements and the elements-container are transformed -->
              <div class="planning-board-canvas" id="planning-board-canvas">
                  <div id="elements-container"></div>
              </div>
          </div>
          
          <!-- Instruction Overlay -->
          <div id="board-instruction-overlay" class="instruction-overlay hidden">
              <span id="instruction-text"></span>
          </div>
      </div>

      <!-- File Convert Pane -->
      <div id="pane-file-convert" class="file-convert-pane hidden">
          <div class="file-convert-header">
              <span class="convert-title">File Converter</span>
              
              <!-- Navigation Controls -->
              <div class="webview-nav-controls">
                  <button class="nav-btn" id="webview-back" title="Back">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="15 18 9 12 15 6"></polyline>
                      </svg>
                  </button>
                  <button class="nav-btn" id="webview-forward" title="Forward">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="9 18 15 12 9 6"></polyline>
                      </svg>
                  </button>
                  <button class="nav-btn" id="webview-home" title="Home">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                          <polyline points="9 22 9 12 15 12 15 22"></polyline>
                      </svg>
                  </button>
                  <button class="nav-btn" id="webview-reload" title="Reload">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="23 4 23 10 17 10"></polyline>
                          <polyline points="1 20 1 14 7 14"></polyline>
                          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                      </svg>
                  </button>
                  <div class="attribution-label" style="
                      margin-left: 12px;
                      padding-left: 12px;
                      border-left: 1px solid #333;
                      font-size: 11px;
                      color: #666;
                      display: flex;
                      align-items: center;
                      height: 20px;
                      user-select: none;
                  " title="For file conversion we are using the third-party website iLovePDF">
                      Powered by <strong>iLovePDF</strong>
                  </div>
              </div>
          </div>
          
          <div class="file-convert-content">
              <!-- Privacy Notice -->
              <div class="privacy-notice hidden">
                  <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="12" y1="16" x2="12" y2="12"></line>
                      <line x1="12" y1="8" x2="12.01" y2="8"></line>
                  </svg>
                  <p>File conversion is handled by iLovePDF, a third-party service. Your files will be uploaded to their servers for processing.</p>
              </div>

              <!-- iLovePDF Embedded Browser -->
              <div class="ilovepdf-webview-container">
                  <webview id="ilovepdf-webview" 
                           src="https://www.ilovepdf.com/" 
                           partition="persist:ilovepdf"
                           allowpopups
                           webpreferences="allowRunningInsecureContent=no">
                  </webview>
              </div>
          </div>
      </div>

      <!-- Planning Board Help Modal -->
      <div id="board-help-modal" class="board-modal hidden">
          <div class="board-modal-content">
              <div class="board-modal-header">
                  <h2>Planning Board - Keyboard Shortcuts</h2>
                  <button class="board-modal-close" id="board-help-close">√ó</button>
              </div>
              <div class="board-modal-body">
                  <h3>Tools</h3>
                  <table class="shortcuts-table">
                      <tr><td><kbd>V</kbd></td><td>Select Tool</td></tr>
                      <tr><td><kbd>T</kbd></td><td>Text Tool</td></tr>
                      <tr><td><kbd>I</kbd></td><td>Image Tool</td></tr>
                      <tr><td><kbd>D</kbd></td><td>Draw Tool</td></tr>
                      <tr><td><kbd>E</kbd></td><td>Eraser Tool</td></tr>
                  </table>

                  <h3>Actions</h3>
                  <table class="shortcuts-table">
                      <tr><td><kbd>Delete</kbd> / <kbd>Backspace</kbd></td><td>Delete Selected Element</td></tr>
                      <tr><td><kbd>Ctrl</kbd> + <kbd>V</kbd></td><td>Paste Image</td></tr>
                      <tr><td><kbd>Mouse Wheel</kbd></td><td>Zoom In/Out</td></tr>
                      <tr><td><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>S</kbd></td><td>Screen Capture to Board</td></tr>
                      <tr><td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>H</kbd></td><td>Draw on screen</td></tr>
                      <tr><td><kbd>Drag</kbd> (Select Tool)</td><td>Pan Canvas</td></tr>
                      <tr><td><kbd>Double-click</kbd> Text</td><td>Edit Text</td></tr>
                  </table>

                  <h3>Tips</h3>
                  <ul class="tips-list">
                      <li>Click any element to select it</li>
                      <li>Text and images can be moved in any mode</li>
                      <li>Drawings can only be moved in Select mode</li>
                      <li>Use color picker and stroke size to customize drawings</li>
                      <li>Eraser deletes entire drawing strokes it touches</li>
                  </ul>
              </div>
          </div>
      </div>



      <!-- Context Send Action Menu (Keep this comment for the unique one below) -->
      <div id="context-send-menu" class="context-menu hidden">
        <div class="context-menu-header">
          <span class="context-preview" id="context-preview">Selected text...</span>
          <button class="close-btn" id="close-context-menu">‚úï</button>
        </div>
        <div class="context-menu-actions">
          <button class="context-action" data-action="explain">
            <span class="action-icon">üîç</span>
            <span class="action-label">Explain this</span>
            <span class="action-key">1</span>
          </button>
          <button class="context-action" data-action="fix">
            <span class="action-icon">üêõ</span>
            <span class="action-label">Fix bug</span>
            <span class="action-key">2</span>
          </button>
          <button class="context-action" data-action="summarize">
            <span class="action-icon">üìù</span>
            <span class="action-label">Summarize</span>
            <span class="action-key">3</span>
          </button>
          <button class="context-action" data-action="send">
            <span class="action-icon">‚û°Ô∏è</span>
            <span class="action-label">Send as-is</span>
            <span class="action-key">4</span>
          </button>
        </div>
      </div>

      <!-- App Status Bar / Footer -->

      <footer class="app-footer">
          <div class="footer-left">
            <button id="quick-incognito-btn" class="footer-btn" title="Toggle Incognito">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                    <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
                <span>Incognito</span>
            </button>
            <button id="quick-refresh-btn" class="footer-btn" title="Refresh">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M23 4v6h-6"></path>
                    <path d="M1 20v-6h6"></path>
                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                </svg>
                <span>Refresh</span>
            </button>
            <button id="collapse-btn" class="footer-btn" title="Compact Mode">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="4 14 10 14 10 20"></polyline>
                    <polyline points="20 10 14 10 14 4"></polyline>
                    <line x1="14" y1="10" x2="21" y2="3"></line>
                    <line x1="3" y1="21" x2="10" y2="14"></line>
                </svg>
                <span>Compact</span>
            </button>
          </div>
          <div class="footer-controls">
             <!-- Right side empty for now -->
          </div>
      </footer>

    </main>
   
   <!-- Compare Panel (OLD MODAL - REMOVED) -->
    
   <!-- About Modal -->
   <div id="modal-about-app" class="modal-overlay hidden">
     <div class="modal">
       <div class="modal-header">
         <h3>About AI Assistant</h3>
         <button id="close-modal" class="close-btn">&times;</button>
       </div>
       <div class="modal-content">
         <p class="description">A floating desktop AI workspace that stays pinned above all applications, allowing users to access multiple AI tools without switching screens. Designed to improve focus, speed, and productivity during everyday work.</p>
         
         <div style="margin: 20px 0; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 12px; border: 1px solid #333;">
           <h4 style="margin: 0 0 16px 0; color: #3b82f6; font-size: 14px;">‚å®Ô∏è Keyboard Shortcuts</h4>
           <div style="display: grid; gap: 8px; font-size: 12px;">
             <div style="display: flex; justify-content: space-between; align-items: center;">
               <span style="color: #aaa;">Show/Hide Window</span>
               <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; color: #60a5fa;">Ctrl+Shift+A</code>
             </div>
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: #aaa;">Context Send (Auto-Copy)</span>
                <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; color: #60a5fa;">Ctrl+Shift+C</code>
              </div>
             <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: #aaa;">Switch to AI 1-9</span>
                <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; color: #60a5fa;">Ctrl+1-9</code>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: #aaa;">Toggle Dock Mode</span>
                <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; color: #60a5fa;">Ctrl+Shift+D</code>
              </div>
            </div>
         </div>
         
         <div class="credit-box">
           <span>Made by</span>
           <strong>Ankit</strong>
           <div style="margin-top:8px;font-size:10px;color:#666;">Version 1.0.3</div>
         </div>
       </div>
     </div>
   </div>

   <!-- Manage AIs Modal -->
   <div id="modal-settings-app" class="modal-overlay hidden">
     <div class="modal settings-modal">
       <div class="modal-header">
         <h3>Manage Sidebar</h3>
         <button id="close-settings-modal" class="close-btn">&times;</button>
       </div>
       <div class="modal-content">
         <ul class="settings-list" id="manage-list">
             <!-- AI items to edit will be here -->
         </ul>
         
         <div class="separator-horizontal"></div>

         <h4 style="margin-top:10px;">Sidebar Features</h4>
         <div id="sidebar-features-list" class="settings-list">
            <!-- Toggles injected here -->
         </div>
         
         <div class="separator-horizontal"></div>
         
         <!-- Add AI moved to separate modal -->
         
         <div class="separator-horizontal"></div>
         
         <!-- App Maintenance -->
         <h4 style="margin-top:0;">App Settings</h4>
         <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
             <button id="check-updates-btn" class="secondary-btn">Check for Updates</button>
             <button id="open-github-btn" class="secondary-btn">GitHub Release</button>
         </div>
         <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
             <button class="secondary-btn" id="replay-tour-btn">Start Tour Guide</button>
             <button id="reset-defaults-btn" class="secondary-btn">Reset Defaults</button>
         </div>
         <button id="incognito-toggle-btn" class="secondary-btn" style="width:100%; margin-bottom:10px;">
            üïµÔ∏è Incognito Mode: <span id="incognito-status">OFF</span>
          </button>
         <button id="clear-cache-btn" class="danger-btn" style="width:100%;">Clear Data & Sign Out</button>
       </div>
     </div>
   </div>
   <!-- Tour Container -->
   <div id="tour-container"></div>
    
   <!-- Compact 'Bubble' View -->
   <div id="bubble-view" class="bubble-overlay hidden">
       <div class="bubble-pill">
           <div class="bubble-icon">ü§ñ</div>
           <span class="bubble-text">AI Pin</span>
           <button id="expand-btn" class="bubble-expand-btn">‚§¢</button>
       </div>
   </div>
    <!-- Add AI Modal (New) -->
    <div id="modal-add-ai" class="modal-overlay hidden">
      <div class="modal settings-modal" style="max-height: 400px; max-width: 400px;">
        <div class="modal-header">
          <h3>Add New AI</h3>
          <button id="close-add-modal" class="close-btn">&times;</button>
        </div>
        <div class="modal-content">
          <p style="font-size:12px;color:#aaa;margin-bottom:12px;">Add a custom website/AI to your sidebar.</p>
          <div class="form-group">
            <label for="new-ai-name">Name</label>
            <input type="text" id="new-ai-name" placeholder="E.g., QuillBot" />
          </div>
          <div class="form-group">
            <label for="new-ai-url">Website URL</label>
            <input type="text" id="new-ai-url" placeholder="https://quillbot.com" />
          </div>
          <button id="save-ai-btn" class="primary-btn" style="width:100%; margin-top:4px;">Add to Sidebar</button>
        </div>
      </div>
    </div>

    <!-- Login Failure Modal -->
    <div id="modal-login-failed" class="modal-overlay hidden">
      <div class="modal settings-modal" style="max-width: 400px;">
        <div class="modal-header">
          <h3>üîê Login Failed</h3>
          <button id="close-login-failed-modal" class="close-btn">&times;</button>
        </div>
        <div class="modal-content">
          <p style="font-size: 14px; margin-bottom: 12px; line-height: 1.5;">
            Login couldn't be completed. This is usually caused by corrupted cookies or cache.
          </p>
          <p style="font-size: 13px; color: #aaa; margin-bottom: 20px;">
            You can try clearing the app cache and logging in again.
          </p>
          
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <button id="clear-cache-retry-btn" class="primary-btn" style="width: 100%;">Clear Cache & Retry</button>
            <button id="cancel-login-failed-btn" class="secondary-btn" style="width: 100%;">Cancel</button>
            <a href="#" id="open-in-system-browser-link" style="font-size: 11px; color: #666; text-align: center; text-decoration: none; margin-top: 5px;">Open in system browser</a>
          </div>
        </div>
      </div>
    </div>
  </div>
    <!-- Update Banner (Sleek, Floating) -->
    <div id="update-banner" class="update-banner hidden">
      <div class="update-banner-content">
        <div class="update-info">
          <span class="update-icon">üöÄ</span>
          <div class="update-text">
            <span class="update-title">New Update Available!</span>
            <span class="update-version" id="update-version-text">v0.0.0</span>
          </div>
        </div>
        <div class="update-actions">
          <button id="update-view-notes" class="secondary-btn small">Notes</button>
          <button id="update-later" class="secondary-btn small">Later</button>
          <button id="update-now" class="primary-btn small">Download & Install</button>
        </div>
      </div>
      
      <!-- SmartScreen Warning (Visible inside app UI before install) -->
      <div id="update-warning" class="update-warning hidden">
        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        <span>Windows may show a security warning because this update is not digitally signed. This is expected for early versions.</span>
      </div>

      <!-- Progress Bar (Sleek) -->
      <div id="update-progress-container" class="update-progress-container hidden">
        <div class="progress-bar-wrapper">
          <div id="update-progress-bar" class="progress-bar-fill" style="width: 0%"></div>
        <div class="update-header">
            <div class="update-icon">
                <span style="font-size: 20px;">üöÄ</span>
            </div>
            <div class="update-info">
                <h3>New Update Available!</h3>
                <span class="version-tag" id="update-version-text">v1.0.3</span>
            </div>
            <div class="update-actions">
                <button id="update-view-notes" class="btn-outline-sm">Notes</button>
                <button id="update-later" class="btn-outline-sm">Later</button>
                <button id="update-now" class="btn-primary-sm">Update Now</button>
            </div>
        </div>

        <!-- Warning Box (Visible during download) -->
        <div id="update-warning" class="update-warning hidden">
            <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            <p>Windows may show a security warning because this update is not digitally signed. This is expected for early versions.</p>
        </div>

        <!-- Progress Bar (Visible during download) -->
        <div id="update-progress-container" class="update-progress-container hidden">
            <div class="progress-bar-bg">
                <div id="update-progress-bar" class="progress-bar-fill" style="width: 0%;"></div>
            </div>
            <span id="update-progress-text" class="progress-text">Starting download...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="planning-board.js"></script>
    <script src="renderer.js"></script>
</body>
</html>
